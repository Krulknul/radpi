#:kivy 2.2.1
#:import get_epoch data_fetcher.get_epoch
#:import get_rank data_fetcher.get_rank
#:import get_recent_uptime data_fetcher.get_recent_uptime
#:import get_stake data_fetcher.get_stake
#:import get_main_status data_fetcher.get_main_status
#:import get_backup_status data_fetcher.get_backup_status
#:import get_transactions data_fetcher.get_transactions

<ValuesWidget>:
    orientation: 'vertical'
    spacing: 13
    padding: 0, 10, 0, 10

<TxList>:
    padding: 0, 0, 0, 0
    viewclass: 'ListItem'
    orientation: 'horizontal'

    RecycleBoxLayout:
        # width: 100

        # default_size: dp(56), None
        default_size_hint: None, 1
        orientation: 'horizontal'
        padding: root.padding
        spacing: 10

<ListItem>:
    orientation: 'vertical'
    value: ""
    type: ""
    canvas.before:
        Color:
            rgba: [1, 0, 0, 1] if root.type == "UNSTAKE" else [0, 1, 0, 1]
        Line:
            width: 1.3
            rectangle: self.x, self.y, self.width, self.height

    Label:
        id: text
        text: root.text
        # size_hint_x: 0.9
        halign: 'center'
    Label:
        id: value
        text: root.value


<CustomProgressBar@Widget>:

<LabeledValue@BoxLayout>:
    orientation: 'vertical'
    AnchorLayout:
        id: label_layout
        anchor_x: 'center'
        anchor_y: 'top'
        Label:
            halign: 'center'
            valign: 'middle'
            text: root.text
    AnchorLayout:
        id: value_layout
        anchor_x: 'center'
        anchor_y: 'top'
        Label:
            id: val
            halign: 'center'
            valign: 'middle'
            font_size: 20
            text: root.value

<MainScreen>:
    FloatLayout:
        BoxLayout:
            orientation: 'vertical'
            CustomProgressBar:
                size_hint: 1, 0.08
                id: progress_bar
                height: 20
            BoxLayout:
                orientation: 'horizontal'
                BoxLayout:
                    id: graphs
                    orientation: 'vertical'
                    ProposalGraph:
                        id: graph1
                        adjust: [0.13, 0.21, 0.95, 0.75]
                    ActivityGraph:
                        id: graph2
                        adjust: [0.13, 0.21, 0.95, 0.75]
                ValuesWidget:
                    id: valueswidget
                    size_hint: 0.3, 1
                    StatusLabeledValue:
                        text: 'Main status'
                        getter: get_main_status
                    StatusLabeledValue:
                        text: 'Backup status'
                        getter: get_backup_status
                    LabeledValue:
                        text: 'Current epoch'
                        getter: get_epoch
                    LabeledValue:
                        text: 'Stake amount'
                        getter: get_stake
                    LabeledValue:
                        text: 'Ranking'
                        getter: get_rank
                    LabeledValue:
                        text: 'Recent uptime'
                        getter: get_recent_uptime
        Label:
            text: 'Dashboard by krulknul.com'
            pos_hint: {'center_x': 0.80, 'center_y': 0.965}
            color: 0, 0, 0, 1

<AltScreen>:
    FloatLayout:
        BoxLayout:
            orientation: 'vertical'
            CustomProgressBar:
                size_hint: 1, 0.08
                id: progress_bar
                height: 20
            BoxLayout:
                orientation: 'horizontal'
                BoxLayout:
                    id: graphs
                    orientation: 'vertical'
                    TxList:
                        id: txlist
                        size_hint: 1, 0.3
                        padding: 25, 10, 10, 2
                    StakeGraph:
                        id: graph
                        adjust: [0.13, 0.15, 0.95, 0.85]
                ValuesWidget:
                    id: valueswidget
                    size_hint: 0.3, 1
                    StatusLabeledValue:
                        text: 'Main status'
                        getter: get_main_status
                    StatusLabeledValue:
                        text: 'Backup status'
                        getter: get_backup_status
                    LabeledValue:
                        text: 'Current epoch'
                        getter: get_epoch
                    LabeledValue:
                        text: 'Stake amount'
                        getter: get_stake
                    LabeledValue:
                        text: 'Ranking'
                        getter: get_rank
                    LabeledValue:
                        text: 'Recent uptime'
                        getter: get_recent_uptime
        Label:
            text: 'Dashboard by krulknul.com'
            pos_hint: {'center_x': 0.80, 'center_y': 0.965}
            color: 0, 0, 0, 1

<ScreenManager>:
    AltScreen:
        id: alt
        name: 'alt'
    MainScreen:
        id: main
        name: 'main'